---
title: 'Installation'
description: 'Install and set up the Ligature proof engine system'
---

# Installation

This guide will help you install and set up the Ligature proof engine system, including the Baton framework and the Lean 4 engine.

## Prerequisites

Before installing the proof engine system, ensure you have the following prerequisites:

### System Requirements

- **Operating System**: Linux, macOS, or Windows
- **Rust**: Rust 1.70 or later
- **Cargo**: Latest stable version
- **Git**: For cloning the repository

### Required Dependencies

#### Lean 4 Installation

The Lean 4 engine requires Lean 4 to be installed on your system.

**Linux/macOS:**
```bash
# Install Lean 4 using elan (recommended)
curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | sh

# Or install from source
git clone https://github.com/leanprover/lean4.git
cd lean4
make
sudo make install
```

**Windows:**
```powershell
# Install using winget
winget install Lean.Lean

# Or download from https://github.com/leanprover/lean4/releases
```

**Verify Installation:**
```bash
lean --version
```

## Installation Methods

### Method 1: From Source (Recommended)

1. **Clone the Repository:**
   ```bash
   git clone https://github.com/your-org/ligature.git
   cd ligature
   ```

2. **Build the Project:**
   ```bash
   cargo build --release
   ```

3. **Install Dependencies:**
   ```bash
   # Install the proof engine crates
   cargo install --path crates/baton-engine-plugin
   cargo install --path engines/lean
   ```

### Method 2: Using Cargo

Add the proof engine dependencies to your `Cargo.toml`:

```toml
[dependencies]
baton-engine-plugin = { git = "https://github.com/your-org/ligature" }
baton-lean-engine = { git = "https://github.com/your-org/ligature" }
```

### Method 3: Binary Distribution

Download pre-built binaries from the releases page:

```bash
# Download and extract the latest release
curl -L https://github.com/your-org/ligature/releases/latest/download/ligature-proof-engine.tar.gz | tar -xz
cd ligature-proof-engine
```

## Configuration

### Basic Configuration

Create a configuration file for the proof engine system:

```json
{
  "default_engine": "lean",
  "engines": {
    "lean": {
      "timeout": 60,
      "enable_cache": true,
      "client_config": {
        "lean_path": "/usr/bin/lean",
        "connection_timeout": 30,
        "request_timeout": 60
      }
    }
  }
}
```

### Environment Variables

Set the following environment variables:

```bash
# Path to Lean executable
export LEAN_PATH=/usr/bin/lean

# Proof engine configuration
export PROOF_ENGINE_CONFIG=/path/to/config.json

# Logging level
export RUST_LOG=info
```

## Verification

### Test the Installation

1. **Run Basic Tests:**
   ```bash
   cargo test -p baton-lean-engine
   ```

2. **Test Lean Integration:**
   ```bash
   cargo run --example basic_usage -p baton-lean-engine
   ```

3. **Verify Engine Capabilities:**
   ```rust
   use baton_engine_plugin::prelude::*;
   use baton_lean_engine::prelude::*;

   #[tokio::main]
   async fn main() -> BatonResult<()> {
       let manager = EnginePluginManager::new();
       let lean_plugin = LeanEnginePlugin::new();
       manager.register_plugin(Box::new(lean_plugin)).await?;

       let capabilities = manager.get_plugin_capabilities("lean").await?;
       println!("Lean capabilities: {:?}", capabilities);

       Ok(())
   }
   ```

## IDE Integration

### VS Code

1. **Install the Ligature Extension:**
   - Open VS Code
   - Go to Extensions (Ctrl+Shift+X)
   - Search for "Ligature"
   - Install the official Ligature extension

2. **Configure the Extension:**
   ```json
   {
     "ligature.proofEngine.enabled": true,
     "ligature.proofEngine.defaultEngine": "lean",
     "ligature.proofEngine.configPath": "/path/to/config.json"
   }
   ```

### Other IDEs

For other IDEs, you can use the command-line interface:

```bash
# Start the proof engine server
ligature proof-engine start

# In another terminal, connect to the server
ligature proof-engine connect
```

## Troubleshooting

### Common Installation Issues

#### Lean Not Found

**Error:** `Lean executable not found`

**Solution:**
```bash
# Check if Lean is installed
which lean

# If not found, install Lean 4
curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | sh

# Update PATH
export PATH="$HOME/.elan/bin:$PATH"
```

#### Build Failures

**Error:** `Failed to build baton-lean-engine`

**Solution:**
```bash
# Update Rust
rustup update

# Clean and rebuild
cargo clean
cargo build --release

# Check dependencies
cargo check -p baton-lean-engine
```

#### Permission Issues

**Error:** `Permission denied`

**Solution:**
```bash
# Fix permissions
sudo chown -R $USER:$USER ~/.cargo
sudo chown -R $USER:$USER ~/.rustup

# Or install with user permissions
cargo install --user --path engines/lean
```

### Debug Mode

Enable debug logging for troubleshooting:

```bash
# Set debug logging
export RUST_LOG=debug

# Run with verbose output
cargo run --example basic_usage -p baton-lean-engine -- --verbose
```

### Performance Issues

If you experience performance issues:

1. **Increase Memory Limits:**
   ```json
   {
     "engines": {
       "lean": {
         "max_concurrent_tasks": 5,
         "memory_limit": 2048
       }
     }
   }
   ```

2. **Enable Caching:**
   ```json
   {
     "engines": {
       "lean": {
         "enable_cache": true,
         "cache_ttl": 7200
       }
     }
   }
   ```

## Next Steps

After successful installation:

1. [Configure your first engine](./configuration.mdx)
2. [Run your first verification](./quick-start.mdx)
3. [Explore advanced features](./advanced-features.mdx)
4. [Learn about engine development](./engine-development.mdx)

## Support

If you encounter issues during installation:

1. Check the [troubleshooting section](#troubleshooting)
2. Review the [GitHub issues](https://github.com/your-org/ligature/issues)
3. Join the [community discussions](https://github.com/your-org/ligature/discussions)
4. Contact the development team

## Related Documentation

- [Proof Engine System Overview](./index.mdx)
- [Lean 4 Engine Documentation](./lean-engine.mdx)
- [Configuration Guide](./configuration.mdx)
- [Quick Start Guide](./quick-start.mdx)
